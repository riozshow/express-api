{"ast":null,"code":"import axios from'axios';import{API_URL}from'../config';/* SELECTORS */export const getSeats=_ref=>{let{seats}=_ref;return seats.data;};export const getRequests=_ref2=>{let{seats}=_ref2;return seats.requests;};/* ACTIONS */ // action name creator\nconst reducerName='seats';const createActionName=name=>\"app/\".concat(reducerName,\"/\").concat(name);const START_REQUEST=createActionName('START_REQUEST');const END_REQUEST=createActionName('END_REQUEST');const ERROR_REQUEST=createActionName('ERROR_REQUEST');const LOAD_SEATS=createActionName('LOAD_SEATS');const ADD_SEAT=createActionName('ADD_SEAT');export const startRequest=payload=>({payload,type:START_REQUEST});export const endRequest=payload=>({payload,type:END_REQUEST});export const errorRequest=payload=>({payload,type:ERROR_REQUEST});export const loadSeats=payload=>({payload,type:LOAD_SEATS});export const addSeat=payload=>({payload,type:ADD_SEAT});/* THUNKS */export const loadSeatsRequest=()=>{return async dispatch=>{dispatch(startRequest({name:'LOAD_SEATS'}));try{let res=await axios.get(\"\".concat(API_URL,\"/seats\"));dispatch(loadSeats(res.data));dispatch(endRequest({name:'LOAD_SEATS'}));}catch(e){dispatch(errorRequest({name:'LOAD_SEATS',error:e.message}));}};};export const addSeatRequest=seat=>{return async dispatch=>{dispatch(startRequest({name:'ADD_SEAT'}));try{let res=await axios.post(\"\".concat(API_URL,\"/seats\"),seat);dispatch(addSeat(res));dispatch(endRequest({name:'ADD_SEAT'}));}catch(e){dispatch(errorRequest({name:'ADD_SEAT',error:e.message}));}};};/* INITIAL STATE */const initialState={data:[],requests:{}};/* REDUCER */export default function reducer(){let statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case LOAD_SEATS:return{...statePart,data:[...action.payload]};case ADD_SEAT:return{...statePart,data:[...statePart.data,action.payload]};case START_REQUEST:return{...statePart,requests:{...statePart.requests,[action.payload.name]:{pending:true,error:null,success:false}}};case END_REQUEST:return{...statePart,requests:{...statePart.requests,[action.payload.name]:{pending:false,error:null,success:true}}};case ERROR_REQUEST:return{...statePart,requests:{...statePart.requests,[action.payload.name]:{pending:false,error:action.payload.error,success:false}}};default:return statePart;}}","map":{"version":3,"names":["axios","API_URL","getSeats","_ref","seats","data","getRequests","_ref2","requests","reducerName","createActionName","name","concat","START_REQUEST","END_REQUEST","ERROR_REQUEST","LOAD_SEATS","ADD_SEAT","startRequest","payload","type","endRequest","errorRequest","loadSeats","addSeat","loadSeatsRequest","dispatch","res","get","e","error","message","addSeatRequest","seat","post","initialState","reducer","statePart","arguments","length","undefined","action","pending","success"],"sources":["D:/KODILLA/express-2/client/src/redux/seatsRedux.js"],"sourcesContent":["import axios from 'axios';\r\nimport { API_URL } from '../config';\r\n\r\n/* SELECTORS */\r\nexport const getSeats = ({ seats }) => seats.data;\r\nexport const getRequests = ({ seats }) => seats.requests;\r\n\r\n/* ACTIONS */\r\n\r\n// action name creator\r\nconst reducerName = 'seats';\r\nconst createActionName = (name) => `app/${reducerName}/${name}`;\r\n\r\nconst START_REQUEST = createActionName('START_REQUEST');\r\nconst END_REQUEST = createActionName('END_REQUEST');\r\nconst ERROR_REQUEST = createActionName('ERROR_REQUEST');\r\n\r\nconst LOAD_SEATS = createActionName('LOAD_SEATS');\r\nconst ADD_SEAT = createActionName('ADD_SEAT');\r\n\r\nexport const startRequest = (payload) => ({ payload, type: START_REQUEST });\r\nexport const endRequest = (payload) => ({ payload, type: END_REQUEST });\r\nexport const errorRequest = (payload) => ({ payload, type: ERROR_REQUEST });\r\n\r\nexport const loadSeats = (payload) => ({ payload, type: LOAD_SEATS });\r\nexport const addSeat = (payload) => ({ payload, type: ADD_SEAT });\r\n\r\n/* THUNKS */\r\n\r\nexport const loadSeatsRequest = () => {\r\n  return async (dispatch) => {\r\n    dispatch(startRequest({ name: 'LOAD_SEATS' }));\r\n    try {\r\n      let res = await axios.get(`${API_URL}/seats`);\r\n      dispatch(loadSeats(res.data));\r\n      dispatch(endRequest({ name: 'LOAD_SEATS' }));\r\n    } catch (e) {\r\n      dispatch(errorRequest({ name: 'LOAD_SEATS', error: e.message }));\r\n    }\r\n  };\r\n};\r\n\r\nexport const addSeatRequest = (seat) => {\r\n  return async (dispatch) => {\r\n    dispatch(startRequest({ name: 'ADD_SEAT' }));\r\n    try {\r\n      let res = await axios.post(`${API_URL}/seats`, seat);\r\n      dispatch(addSeat(res));\r\n      dispatch(endRequest({ name: 'ADD_SEAT' }));\r\n    } catch (e) {\r\n      dispatch(errorRequest({ name: 'ADD_SEAT', error: e.message }));\r\n    }\r\n  };\r\n};\r\n\r\n/* INITIAL STATE */\r\n\r\nconst initialState = {\r\n  data: [],\r\n  requests: {},\r\n};\r\n\r\n/* REDUCER */\r\n\r\nexport default function reducer(statePart = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case LOAD_SEATS:\r\n      return { ...statePart, data: [...action.payload] };\r\n    case ADD_SEAT:\r\n      return { ...statePart, data: [...statePart.data, action.payload] };\r\n    case START_REQUEST:\r\n      return {\r\n        ...statePart,\r\n        requests: {\r\n          ...statePart.requests,\r\n          [action.payload.name]: { pending: true, error: null, success: false },\r\n        },\r\n      };\r\n    case END_REQUEST:\r\n      return {\r\n        ...statePart,\r\n        requests: {\r\n          ...statePart.requests,\r\n          [action.payload.name]: { pending: false, error: null, success: true },\r\n        },\r\n      };\r\n    case ERROR_REQUEST:\r\n      return {\r\n        ...statePart,\r\n        requests: {\r\n          ...statePart.requests,\r\n          [action.payload.name]: {\r\n            pending: false,\r\n            error: action.payload.error,\r\n            success: false,\r\n          },\r\n        },\r\n      };\r\n    default:\r\n      return statePart;\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}