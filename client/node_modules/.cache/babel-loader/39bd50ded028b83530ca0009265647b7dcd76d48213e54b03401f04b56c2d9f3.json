{"ast":null,"code":"import{Button,Form,FormGroup,Label,Input,Row,Col,Alert,Progress}from'reactstrap';import{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{addSeatRequest,getRequests,loadSeatsRequest}from'../../../redux/seatsRedux';import'./OrderTicketForm.scss';import SeatChooser from'./../SeatChooser/SeatChooser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const OrderTicketForm=()=>{const dispatch=useDispatch();const requests=useSelector(getRequests);const[order,setOrder]=useState({client:'',email:'',day:1,seat:''});const[isError,setIsError]=useState(false);const updateSeat=(e,seatId)=>{e.preventDefault();setOrder({...order,seat:seatId});};const updateTextField=_ref=>{let{target}=_ref;const{value,name}=target;setOrder({...order,[name]:value});};const updateNumberField=_ref2=>{let{target}=_ref2;const{value,name}=target;setOrder({...order,[name]:parseInt(value)});};const submitForm=async e=>{e.preventDefault();if(order.client&&order.email&&order.day&&order.seat){await dispatch(addSeatRequest(order));setOrder({client:'',email:'',day:1,seat:''});setIsError(false);dispatch(loadSeatsRequest());}else{setIsError(true);}};return/*#__PURE__*/_jsx(Form,{className:\"order-ticket-form\",onSubmit:submitForm,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:\"12\",md:\"6\",children:[isError&&/*#__PURE__*/_jsx(Alert,{color:\"warning\",children:\"There are some errors in you form. Have you fill all the fields? Maybe you forgot to choose your seat?\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].error&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:requests['ADD_SEAT'].error}),requests['ADD_SEAT']&&requests['ADD_SEAT'].success&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"success\",children:\"You've booked your ticket! Check you email in order to make a payment.\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].pending&&/*#__PURE__*/_jsx(Progress,{animated:true,className:\"mb-5\",color:\"primary\",value:75}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:order.client,name:\"client\",onChange:updateTextField,id:\"clientName\",placeholder:\"John Doe\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",value:order.email,name:\"email\",onChange:updateTextField,id:\"clientEmail\",placeholder:\"johndoe@example.com\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientDay\",children:\"Select which day of festivals are you interested in:\"}),/*#__PURE__*/_jsxs(Input,{type:\"select\",value:order.day,name:\"day\",onChange:updateNumberField,id:\"exampleSelect\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"3\"})]}),/*#__PURE__*/_jsx(\"small\",{id:\"dayHelp\",className:\"form-text text-muted\",children:\"Every day of the festival uses individual ticket. You can book only one ticket at the time.\"})]}),/*#__PURE__*/_jsx(FormGroup,{check:true,children:/*#__PURE__*/_jsxs(Label,{check:true,children:[/*#__PURE__*/_jsx(Input,{required:true,type:\"checkbox\"}),\" I agree with\",' ',/*#__PURE__*/_jsx(\"a\",{href:\"/terms-and-conditions\",children:\"Terms and conditions\"}),\" and\",' ',/*#__PURE__*/_jsx(\"a\",{href:\"/privacy-policy\",children:\"Privacy Policy\"}),\".\"]})}),/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"mt-3\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Col,{xs:\"12\",md:\"6\",children:/*#__PURE__*/_jsx(SeatChooser,{chosenDay:order.day,chosenSeat:order.seat,updateSeat:updateSeat})})]})});};export default OrderTicketForm;","map":{"version":3,"names":["Button","Form","FormGroup","Label","Input","Row","Col","Alert","Progress","useState","useDispatch","useSelector","addSeatRequest","getRequests","loadSeatsRequest","SeatChooser","jsx","_jsx","jsxs","_jsxs","OrderTicketForm","dispatch","requests","order","setOrder","client","email","day","seat","isError","setIsError","updateSeat","e","seatId","preventDefault","updateTextField","_ref","target","value","name","updateNumberField","_ref2","parseInt","submitForm","className","onSubmit","children","xs","md","color","error","success","pending","animated","for","type","onChange","id","placeholder","check","required","href","chosenDay","chosenSeat"],"sources":["D:/KODILLA/express-2/client/src/components/features/OrderTicketForm/OrderTicketForm.js"],"sourcesContent":["import {\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Row,\r\n  Col,\r\n  Alert,\r\n  Progress,\r\n} from 'reactstrap';\r\nimport { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  addSeatRequest,\r\n  getRequests,\r\n  loadSeatsRequest,\r\n} from '../../../redux/seatsRedux';\r\n\r\nimport './OrderTicketForm.scss';\r\nimport SeatChooser from './../SeatChooser/SeatChooser';\r\n\r\nconst OrderTicketForm = () => {\r\n  const dispatch = useDispatch();\r\n  const requests = useSelector(getRequests);\r\n\r\n  const [order, setOrder] = useState({\r\n    client: '',\r\n    email: '',\r\n    day: 1,\r\n    seat: '',\r\n  });\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  const updateSeat = (e, seatId) => {\r\n    e.preventDefault();\r\n    setOrder({ ...order, seat: seatId });\r\n  };\r\n\r\n  const updateTextField = ({ target }) => {\r\n    const { value, name } = target;\r\n    setOrder({ ...order, [name]: value });\r\n  };\r\n\r\n  const updateNumberField = ({ target }) => {\r\n    const { value, name } = target;\r\n    setOrder({ ...order, [name]: parseInt(value) });\r\n  };\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (order.client && order.email && order.day && order.seat) {\r\n      await dispatch(addSeatRequest(order));\r\n      setOrder({\r\n        client: '',\r\n        email: '',\r\n        day: 1,\r\n        seat: '',\r\n      });\r\n      setIsError(false);\r\n      dispatch(loadSeatsRequest());\r\n    } else {\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form className='order-ticket-form' onSubmit={submitForm}>\r\n      <Row>\r\n        <Col xs='12' md='6'>\r\n          {isError && (\r\n            <Alert color='warning'>\r\n              There are some errors in you form. Have you fill all the fields?\r\n              Maybe you forgot to choose your seat?\r\n            </Alert>\r\n          )}\r\n          {requests['ADD_SEAT'] && requests['ADD_SEAT'].error && !isError && (\r\n            <Alert color='danger'>{requests['ADD_SEAT'].error}</Alert>\r\n          )}\r\n          {requests['ADD_SEAT'] && requests['ADD_SEAT'].success && !isError && (\r\n            <Alert color='success'>\r\n              You've booked your ticket! Check you email in order to make a\r\n              payment.\r\n            </Alert>\r\n          )}\r\n          {requests['ADD_SEAT'] && requests['ADD_SEAT'].pending && (\r\n            <Progress animated className='mb-5' color='primary' value={75} />\r\n          )}\r\n          <FormGroup>\r\n            <Label for='clientEmail'>Name</Label>\r\n            <Input\r\n              type='text'\r\n              value={order.client}\r\n              name='client'\r\n              onChange={updateTextField}\r\n              id='clientName'\r\n              placeholder='John Doe'\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for='clientEmail'>Email</Label>\r\n            <Input\r\n              type='email'\r\n              value={order.email}\r\n              name='email'\r\n              onChange={updateTextField}\r\n              id='clientEmail'\r\n              placeholder='johndoe@example.com'\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for='clientDay'>\r\n              Select which day of festivals are you interested in:\r\n            </Label>\r\n            <Input\r\n              type='select'\r\n              value={order.day}\r\n              name='day'\r\n              onChange={updateNumberField}\r\n              id='exampleSelect'>\r\n              <option>1</option>\r\n              <option>2</option>\r\n              <option>3</option>\r\n            </Input>\r\n            <small id='dayHelp' className='form-text text-muted'>\r\n              Every day of the festival uses individual ticket. You can book\r\n              only one ticket at the time.\r\n            </small>\r\n          </FormGroup>\r\n          <FormGroup check>\r\n            <Label check>\r\n              <Input required type='checkbox' /> I agree with{' '}\r\n              <a href='/terms-and-conditions'>Terms and conditions</a> and{' '}\r\n              <a href='/privacy-policy'>Privacy Policy</a>.\r\n            </Label>\r\n          </FormGroup>\r\n          <Button color='primary' className='mt-3'>\r\n            Submit\r\n          </Button>\r\n        </Col>\r\n        <Col xs='12' md='6'>\r\n          <SeatChooser\r\n            chosenDay={order.day}\r\n            chosenSeat={order.seat}\r\n            updateSeat={updateSeat}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default OrderTicketForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}