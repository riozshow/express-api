{"ast":null,"code":"import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,Progress,Alert}from'reactstrap';import{getSeats,loadSeatsRequest,getRequests}from'../../../redux/seatsRedux';import'./SeatChooser.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const REFRESH_RATE=2*60*1000;const SeatChooser=_ref=>{let{chosenDay,chosenSeat,updateSeat}=_ref;const dispatch=useDispatch();const seats=useSelector(getSeats);const requests=useSelector(getRequests);useEffect(()=>{dispatch(loadSeatsRequest());const interval=setInterval(()=>dispatch(loadSeatsRequest()),REFRESH_RATE);return()=>{clearInterval(interval);};},[dispatch]);const isTaken=seatId=>{return seats.some(item=>item.seat===seatId&&item.day===chosenDay);};const prepareSeat=seatId=>{if(seatId===chosenSeat)return/*#__PURE__*/_jsx(Button,{className:\"seats__seat\",color:\"primary\",children:seatId},seatId);else if(isTaken(seatId))return/*#__PURE__*/_jsx(Button,{className:\"seats__seat\",disabled:true,color:\"secondary\",children:seatId},seatId);else return/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"seats__seat\",outline:true,onClick:e=>updateSeat(e,seatId),children:seatId},seatId);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pick a seat\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"small\",{id:\"pickHelp\",className:\"form-text text-muted ms-2\",children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\"}),\" \\u2013 seat is already taken\"]}),/*#__PURE__*/_jsxs(\"small\",{id:\"pickHelpTwo\",className:\"form-text text-muted ms-2\",children:[/*#__PURE__*/_jsx(Button,{outline:true,color:\"primary\"}),\" \\u2013 it's empty\"]})]}),requests['LOAD_SEATS']&&requests['LOAD_SEATS'].success&&/*#__PURE__*/_jsx(\"div\",{className:\"seats\",children:[...Array(50)].map((x,i)=>prepareSeat(i+1))}),requests['LOAD_SEATS']&&requests['LOAD_SEATS'].pending&&/*#__PURE__*/_jsx(Progress,{animated:true,color:\"primary\",value:50}),requests['LOAD_SEATS']&&requests['LOAD_SEATS'].error&&/*#__PURE__*/_jsx(Alert,{color:\"warning\",children:\"Couldn't load seats...\"})]});};export default SeatChooser;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","Button","Progress","Alert","getSeats","loadSeatsRequest","getRequests","jsx","_jsx","jsxs","_jsxs","REFRESH_RATE","SeatChooser","_ref","chosenDay","chosenSeat","updateSeat","dispatch","seats","requests","interval","setInterval","clearInterval","isTaken","seatId","some","item","seat","day","prepareSeat","className","color","children","disabled","outline","onClick","e","id","success","Array","map","x","i","pending","animated","value","error"],"sources":["D:/KODILLA/express-2/client/src/components/features/SeatChooser/SeatChooser.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Progress, Alert } from 'reactstrap';\r\nimport {\r\n  getSeats,\r\n  loadSeatsRequest,\r\n  getRequests,\r\n} from '../../../redux/seatsRedux';\r\nimport './SeatChooser.scss';\r\n\r\nconst REFRESH_RATE = 2 * 60 * 1000;\r\n\r\nconst SeatChooser = ({ chosenDay, chosenSeat, updateSeat }) => {\r\n  const dispatch = useDispatch();\r\n  const seats = useSelector(getSeats);\r\n  const requests = useSelector(getRequests);\r\n\r\n  useEffect(() => {\r\n    dispatch(loadSeatsRequest());\r\n\r\n    const interval = setInterval(\r\n      () => dispatch(loadSeatsRequest()),\r\n      REFRESH_RATE\r\n    );\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const isTaken = (seatId) => {\r\n    return seats.some((item) => item.seat === seatId && item.day === chosenDay);\r\n  };\r\n\r\n  const prepareSeat = (seatId) => {\r\n    if (seatId === chosenSeat)\r\n      return (\r\n        <Button key={seatId} className='seats__seat' color='primary'>\r\n          {seatId}\r\n        </Button>\r\n      );\r\n    else if (isTaken(seatId))\r\n      return (\r\n        <Button key={seatId} className='seats__seat' disabled color='secondary'>\r\n          {seatId}\r\n        </Button>\r\n      );\r\n    else\r\n      return (\r\n        <Button\r\n          key={seatId}\r\n          color='primary'\r\n          className='seats__seat'\r\n          outline\r\n          onClick={(e) => updateSeat(e, seatId)}>\r\n          {seatId}\r\n        </Button>\r\n      );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3>Pick a seat</h3>\r\n      <div className='mb-4'>\r\n        <small id='pickHelp' className='form-text text-muted ms-2'>\r\n          <Button color='secondary' /> – seat is already taken\r\n        </small>\r\n        <small id='pickHelpTwo' className='form-text text-muted ms-2'>\r\n          <Button outline color='primary' /> – it's empty\r\n        </small>\r\n      </div>\r\n      {requests['LOAD_SEATS'] && requests['LOAD_SEATS'].success && (\r\n        <div className='seats'>\r\n          {[...Array(50)].map((x, i) => prepareSeat(i + 1))}\r\n        </div>\r\n      )}\r\n      {requests['LOAD_SEATS'] && requests['LOAD_SEATS'].pending && (\r\n        <Progress animated color='primary' value={50} />\r\n      )}\r\n      {requests['LOAD_SEATS'] && requests['LOAD_SEATS'].error && (\r\n        <Alert color='warning'>Couldn't load seats...</Alert>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeatChooser;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}